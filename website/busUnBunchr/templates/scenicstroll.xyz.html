<!DOCTYPE html>
<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"><title>http://scenicstroll.xyz/#</title><link rel="stylesheet" type="text/css" href="scenicstroll.xyz_files/viewsource.css"></head><body contextmenu="actions" id="viewsource" class="highlight" style="-moz-tab-size: 4"><pre id="line1"><span>
<span id="line2"></span></span><span class="doctype">&lt;!DOCTYPE html&gt;</span><span>
<span id="line3"></span></span><span>&lt;<span class="start-tag">html</span> <span class="attribute-name">lang</span>="<a class="attribute-value">en</a>"&gt;</span><span>
<span id="line4"></span>  </span><span>&lt;<span class="start-tag">head</span>&gt;</span><span>
<span id="line5"></span>    </span><span>&lt;<span class="start-tag">meta</span> <span class="attribute-name">charset</span>="<a class="attribute-value">utf-8</a>"&gt;</span><span>
<span id="line6"></span>    </span><span>&lt;<span class="start-tag">meta</span> <span class="attribute-name">http-equiv</span>="<a class="attribute-value">X-UA-Compatible</a>" <span class="attribute-name">content</span>="<a class="attribute-value">IE=edge</a>"&gt;</span><span>
<span id="line7"></span>    </span><span>&lt;<span class="start-tag">meta</span> <span class="attribute-name">name</span>="<a class="attribute-value">viewport</a>" <span class="attribute-name">content</span>="<a class="attribute-value">width=device-width, initial-scale=1</a>"&gt;</span><span>
<span id="line8"></span>    </span><span class="comment">&lt;!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags --&gt;</span><span>
<span id="line9"></span>    </span><span>&lt;<span class="start-tag">meta</span> <span class="attribute-name">name</span>="<a class="attribute-value">description</a>" <span class="attribute-name">content</span>="<a class="attribute-value"></a>"&gt;</span><span>
<span id="line10"></span>    </span><span>&lt;<span class="start-tag">meta</span> <span class="attribute-name">name</span>="<a class="attribute-value">author</a>" <span class="attribute-name">content</span>="<a class="attribute-value"></a>"&gt;</span><span>
<span id="line11"></span>    </span><span>&lt;<span class="start-tag">link</span> <span class="attribute-name">rel</span>="<a class="attribute-value">icon</a>" <span class="attribute-name">href</span>="<a href="view-source:http://scenicstroll.xyz/favicon.ico" class="attribute-value">../../favicon.ico</a>"&gt;</span><span>
<span id="line12"></span>
<span id="line13"></span>    </span><span>&lt;<span class="start-tag">title</span>&gt;</span><span>ScenicStroll</span><span>&lt;/<span class="end-tag">title</span>&gt;</span><span>
<span id="line14"></span>
<span id="line15"></span>    </span><span>&lt;<span class="start-tag">link</span> <span class="attribute-name">rel</span>="<a class="attribute-value">icon</a>" <span class="attribute-name">type</span>="<a class="attribute-value">image/png</a>" <span class="attribute-name">href</span>="<a href="view-source:http://scenicstroll.xyz/static/images/binoculars.png" class="attribute-value">static/images/binoculars.png</a>"&gt;</span><span>
<span id="line16"></span>    </span><span>&lt;<span class="start-tag">link</span> <span class="attribute-name">rel</span>="<a class="attribute-value">stylesheet</a>" <span class="attribute-name">href</span>="<a href="view-source:http://scenicstroll.xyz/static/css/bootstrap.min.css" class="attribute-value">static/css/bootstrap.min.css</a>" <span>/</span>&gt;</span><span>
<span id="line17"></span>    </span><span>&lt;<span class="start-tag">link</span> <span class="attribute-name">rel</span>="<a class="attribute-value">stylesheet</a>" <span class="attribute-name">href</span>="<a href="view-source:http://scenicstroll.xyz/static/css/bootstrap-slider.css" class="attribute-value">static/css/bootstrap-slider.css</a>" <span>/</span>&gt;</span><span>
<span id="line18"></span>    </span><span>&lt;<span class="start-tag">link</span> <span class="attribute-name">rel</span>="<a class="attribute-value">stylesheet</a>" <span class="attribute-name">href</span>="<a href="view-source:http://scenicstroll.xyz/static/css/leaflet.css" class="attribute-value">static/css/leaflet.css</a>" <span>/</span>&gt;</span><span>
<span id="line19"></span>    </span><span>&lt;<span class="start-tag">link</span> <span class="attribute-name">rel</span>="<a class="attribute-value">stylesheet</a>" <span class="attribute-name">href</span>="<a href="view-source:http://scenicstroll.xyz/static/css/MarkerCluster.css" class="attribute-value">static/css/MarkerCluster.css</a>" <span>/</span>&gt;</span><span>
<span id="line20"></span>    </span><span>&lt;<span class="start-tag">link</span> <span class="attribute-name">rel</span>="<a class="attribute-value">stylesheet</a>" <span class="attribute-name">href</span>="<a href="view-source:http://scenicstroll.xyz/static/css/MarkerCluster.Default.css" class="attribute-value">static/css/MarkerCluster.Default.css</a>" <span>/</span>&gt;</span><span>
<span id="line21"></span>    </span><span>&lt;<span class="start-tag">link</span> <span class="attribute-name">rel</span>="<a class="attribute-value">stylesheet</a>" <span class="attribute-name">href</span>="<a href="view-source:http://scenicstroll.xyz/static/css/scenic.css" class="attribute-value">static/css/scenic.css</a>" <span>/</span>&gt;</span><span>
<span id="line22"></span>    </span><span>&lt;<span class="start-tag">link</span> <span class="attribute-name">rel</span>="<a class="attribute-value">stylesheet</a>" <span class="attribute-name">href</span>="<a href="view-source:https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" class="attribute-value">https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css</a>" <span>/</span>&gt;</span><span>
<span id="line23"></span>
<span id="line24"></span>    </span><span class="comment">&lt;!-- Google Analytics --&gt;</span><span>
<span id="line25"></span>    </span><span>&lt;<span class="start-tag">script</span>&gt;</span><span>
<span id="line26"></span>      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
<span id="line27"></span>      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
<span id="line28"></span>      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
<span id="line29"></span>      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
<span id="line30"></span>      ga('create', 'UA-62007677-2', 'auto');
<span id="line31"></span>      ga('send', 'pageview');
<span id="line32"></span>    </span><span>&lt;/<span class="end-tag">script</span>&gt;</span><span>
<span id="line33"></span>
<span id="line34"></span>  </span><span>&lt;/<span class="end-tag">head</span>&gt;</span><span>
<span id="line35"></span>
<span id="line36"></span>  </span><span>&lt;<span class="start-tag">body</span>&gt;</span><span>
<span id="line37"></span>
<span id="line38"></span>    </span><span>&lt;<span class="start-tag">nav</span> <span class="attribute-name">class</span>="<a class="attribute-value">navbar navbar-inverse navbar-fixed-top</a>"&gt;</span><span>
<span id="line39"></span>      </span><span>&lt;<span class="start-tag">div</span> <span class="attribute-name">class</span>="<a class="attribute-value">container</a>"&gt;</span><span>
<span id="line40"></span>        </span><span>&lt;<span class="start-tag">div</span> <span class="attribute-name">class</span>="<a class="attribute-value">navbar-header</a>"&gt;</span><span>
<span id="line41"></span>          </span><span>&lt;<span class="start-tag">button</span> <span class="attribute-name">type</span>="<a class="attribute-value">button</a>" <span class="attribute-name">class</span>="<a class="attribute-value">navbar-toggle collapsed</a>" <span class="attribute-name">data-toggle</span>="<a class="attribute-value">collapse</a>" <span class="attribute-name">data-target</span>="<a class="attribute-value">#navbar</a>" <span class="attribute-name">aria-expanded</span>="<a class="attribute-value">false</a>" <span class="attribute-name">aria-controls</span>="<a class="attribute-value">navbar</a>"&gt;</span><span>
<span id="line42"></span>            </span><span>&lt;<span class="start-tag">span</span> <span class="attribute-name">class</span>="<a class="attribute-value">sr-only</a>"&gt;</span><span>Toggle navigation</span><span>&lt;/<span class="end-tag">span</span>&gt;</span><span>
<span id="line43"></span>            </span><span>&lt;<span class="start-tag">span</span> <span class="attribute-name">class</span>="<a class="attribute-value">icon-bar</a>"&gt;</span><span></span><span>&lt;/<span class="end-tag">span</span>&gt;</span><span>
<span id="line44"></span>            </span><span>&lt;<span class="start-tag">span</span> <span class="attribute-name">class</span>="<a class="attribute-value">icon-bar</a>"&gt;</span><span></span><span>&lt;/<span class="end-tag">span</span>&gt;</span><span>
<span id="line45"></span>            </span><span>&lt;<span class="start-tag">span</span> <span class="attribute-name">class</span>="<a class="attribute-value">icon-bar</a>"&gt;</span><span></span><span>&lt;/<span class="end-tag">span</span>&gt;</span><span>
<span id="line46"></span>          </span><span>&lt;/<span class="end-tag">button</span>&gt;</span><span>
<span id="line47"></span>          </span><span>&lt;<span class="start-tag">a</span> <span class="attribute-name">class</span>="<a class="attribute-value">navbar-brand</a>" <span class="attribute-name">href</span>="<a href="view-source:http://scenicstroll.xyz/#" class="attribute-value">#</a>"&gt;</span><span>ScenicStroll</span><span>&lt;/<span class="end-tag">a</span>&gt;</span><span>
<span id="line48"></span>        </span><span>&lt;/<span class="end-tag">div</span>&gt;</span><span>
<span id="line49"></span>        </span><span>&lt;<span class="start-tag">div</span> <span class="attribute-name">id</span>="<a class="attribute-value">navbar</a>" <span class="attribute-name">class</span>="<a class="attribute-value">collapse navbar-collapse</a>"&gt;</span><span>
<span id="line50"></span>          </span><span>&lt;<span class="start-tag">ul</span> <span class="attribute-name">class</span>="<a class="attribute-value">nav navbar-nav</a>"&gt;</span><span>
<span id="line51"></span>            </span><span>&lt;<span class="start-tag">li</span> <span class="attribute-name">class</span>="<a class="attribute-value">active</a>"&gt;</span><span></span><span>&lt;<span class="start-tag">a</span> <span class="attribute-name">href</span>="<a href="view-source:http://scenicstroll.xyz/#" class="attribute-value">#</a>"&gt;</span><span>Home</span><span>&lt;/<span class="end-tag">a</span>&gt;</span><span></span><span>&lt;/<span class="end-tag">li</span>&gt;</span><span>
<span id="line52"></span>            </span><span>&lt;<span class="start-tag">li</span>&gt;</span><span></span><span>&lt;<span class="start-tag">a</span> <span class="attribute-name">href</span>="<a href="view-source:http://mcwitt.github.io/" class="attribute-value">http://mcwitt.github.io</a>"&gt;</span><span>About</span><span>&lt;/<span class="end-tag">a</span>&gt;</span><span></span><span>&lt;/<span class="end-tag">li</span>&gt;</span><span>
<span id="line53"></span>            </span><span>&lt;<span class="start-tag">li</span>&gt;</span><span></span><span>&lt;<span class="start-tag">a</span> <span class="attribute-name">href</span>="<a href="view-source:http://slides.com/mattwittmann/scenicstroll/fullscreen" class="attribute-value">http://slides.com/mattwittmann/scenicstroll/fullscreen</a>"&gt;</span><span>Slides</span><span>&lt;/<span class="end-tag">a</span>&gt;</span><span></span><span>&lt;/<span class="end-tag">li</span>&gt;</span><span>
<span id="line54"></span>            </span><span>&lt;<span class="start-tag">li</span>&gt;</span><span></span><span>&lt;<span class="start-tag">a</span> <span class="attribute-name">href</span>="<a href="view-source:https://github.com/mcwitt/scenicstroll" class="attribute-value">https://github.com/mcwitt/scenicstroll</a>"&gt;</span><span></span><span>&lt;<span class="start-tag">i</span> <span class="attribute-name">class</span>="<a class="attribute-value">fa fa-github-square</a>"&gt;</span><span></span><span>&lt;/<span class="end-tag">i</span>&gt;</span><span></span><span>&lt;/<span class="end-tag">a</span>&gt;</span><span></span><span>&lt;/<span class="end-tag">li</span>&gt;</span><span>
<span id="line55"></span>          </span><span>&lt;/<span class="end-tag">ul</span>&gt;</span><span>
<span id="line56"></span>        </span><span>&lt;/<span class="end-tag">div</span>&gt;</span><span></span><span class="comment">&lt;!--/.nav-collapse --&gt;</span><span>
<span id="line57"></span>      </span><span>&lt;/<span class="end-tag">div</span>&gt;</span><span>
<span id="line58"></span>    </span><span>&lt;/<span class="end-tag">nav</span>&gt;</span><span>
<span id="line59"></span>
<span id="line60"></span>    </span><span>&lt;<span class="start-tag">div</span> <span class="attribute-name">id</span>="<a class="attribute-value">map</a>"&gt;</span><span></span><span>&lt;/<span class="end-tag">div</span>&gt;</span><span>
<span id="line61"></span>
<span id="line62"></span>    </span><span>&lt;<span class="start-tag">div</span> <span class="attribute-name">id</span>="<a class="attribute-value">sidebar</a>" <span class="attribute-name">class</span>="<a class="attribute-value">affix</a>"&gt;</span><span>
<span id="line63"></span>      </span><span>&lt;<span class="start-tag">form</span> <span class="attribute-name">name</span>="<a class="attribute-value">input</a>" <span class="attribute-name">action</span>="<a href="view-source:http://scenicstroll.xyz/query" class="attribute-value">/query</a>" <span class="attribute-name">method</span>="<a class="attribute-value">POST</a>"&gt;</span><span>
<span id="line64"></span>        </span><span>&lt;<span class="start-tag">ul</span> <span class="attribute-name">class</span>="<a class="attribute-value">input-list</a>"&gt;</span><span>
<span id="line65"></span>          </span><span>&lt;<span class="start-tag">li</span>&gt;</span><span></span><span>&lt;<span class="start-tag">input</span> <span class="attribute-name">id</span>="<a class="attribute-value">address1</a>" <span class="attribute-name">name</span>="<a class="attribute-value">address1</a>" <span class="attribute-name">placeholder</span>="<a class="attribute-value">e.g., Exploratorium</a>" <span class="attribute-name">type</span>="<a class="attribute-value">text</a>" <span class="attribute-name">value</span>="<a class="attribute-value">15 Pier, San Francisco</a>"&gt;</span><span></span><span>&lt;/<span class="end-tag">li</span>&gt;</span><span>
<span id="line66"></span>          </span><span>&lt;<span class="start-tag">li</span>&gt;</span><span></span><span>&lt;<span class="start-tag">input</span> <span class="attribute-name">id</span>="<a class="attribute-value">address2</a>" <span class="attribute-name">name</span>="<a class="attribute-value">address2</a>" <span class="attribute-name">placeholder</span>="<a class="attribute-value">e.g., Presidio Hill</a>" <span class="attribute-name">type</span>="<a class="attribute-value">text</a>" <span class="attribute-name">value</span>="<a class="attribute-value">Presidio, San Francisco</a>"&gt;</span><span></span><span>&lt;/<span class="end-tag">li</span>&gt;</span><span>
<span id="line67"></span>          </span><span>&lt;<span class="start-tag">li</span>&gt;</span><span></span><span>&lt;<span class="start-tag">input</span> <span class="attribute-name">id</span>="<a class="attribute-value">alpha</a>" <span class="attribute-name">name</span>="<a class="attribute-value">alpha</a>" <span class="attribute-name">type</span>="<a class="attribute-value">text</a>" <span class="attribute-name">value</span>="<a class="attribute-value">5</a>"&gt;</span><span></span><span>&lt;/<span class="end-tag">li</span>&gt;</span><span>
<span id="line68"></span>        </span><span>&lt;/<span class="end-tag">ul</span>&gt;</span><span>
<span id="line69"></span>        </span><span>&lt;<span class="start-tag">p</span> <span class="attribute-name">style</span>="<a class="attribute-value">float:left;color:#ccc</a>"&gt;</span><span>direct</span><span>&lt;/<span class="end-tag">p</span>&gt;</span><span>
<span id="line70"></span>        </span><span>&lt;<span class="start-tag">p</span> <span class="attribute-name">style</span>="<a class="attribute-value">float:right;color:#ccc</a>"&gt;</span><span>scenic</span><span>&lt;/<span class="end-tag">p</span>&gt;</span><span>
<span id="line71"></span>        </span><span>&lt;<span class="start-tag">button</span> <span class="attribute-name">id</span>="<a class="attribute-value">explore</a>" <span class="attribute-name">type</span>="<a class="attribute-value">submit</a>" <span class="attribute-name">class</span>="<a class="attribute-value">btn btn-primary</a>"&gt;</span><span>Go!</span><span>&lt;/<span class="end-tag">button</span>&gt;</span><span>
<span id="line72"></span>      </span><span>&lt;/<span class="end-tag">form</span>&gt;</span><span>
<span id="line73"></span>      </span><span>&lt;<span class="start-tag">div</span> <span class="attribute-name">id</span>="<a class="attribute-value">status</a>"&gt;</span><span></span><span>&lt;/<span class="end-tag">div</span>&gt;</span><span>
<span id="line74"></span>    </span><span>&lt;/<span class="end-tag">div</span>&gt;</span><span>
<span id="line75"></span>
<span id="line76"></span>
<span id="line77"></span>    </span><span class="comment">&lt;!-- Bootstrap core JavaScript --&gt;</span><span>
<span id="line78"></span>    </span><span>&lt;<span class="start-tag">script</span> <span class="attribute-name">src</span>="<a href="view-source:https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js" class="attribute-value">https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js</a>"&gt;</span><span></span><span>&lt;/<span class="end-tag">script</span>&gt;</span><span>
<span id="line79"></span>    </span><span>&lt;<span class="start-tag">script</span> <span class="attribute-name">src</span>="<a href="view-source:http://scenicstroll.xyz/static/js/bootstrap.min.js" class="attribute-value">static/js/bootstrap.min.js</a>"&gt;</span><span></span><span>&lt;/<span class="end-tag">script</span>&gt;</span><span>
<span id="line80"></span>
<span id="line81"></span>    </span><span class="comment">&lt;!-- leaflet.js --&gt;</span><span>
<span id="line82"></span>    </span><span>&lt;<span class="start-tag">script</span> <span class="attribute-name">src</span>="<a href="view-source:http://scenicstroll.xyz/static/js/leaflet.js" class="attribute-value">static/js/leaflet.js</a>"&gt;</span><span></span><span>&lt;/<span class="end-tag">script</span>&gt;</span><span>
<span id="line83"></span>    </span><span>&lt;<span class="start-tag">script</span> <span class="attribute-name">src</span>="<a href="view-source:http://scenicstroll.xyz/static/js/leaflet.markercluster.js" class="attribute-value">static/js/leaflet.markercluster.js</a>"&gt;</span><span></span><span>&lt;/<span class="end-tag">script</span>&gt;</span><span>
<span id="line84"></span>
<span id="line85"></span>    </span><span class="comment">&lt;!-- bootstrap-slider --&gt;</span><span>
<span id="line86"></span>    </span><span>&lt;<span class="start-tag">script</span> <span class="attribute-name">src</span>="<a href="view-source:http://scenicstroll.xyz/static/js/bootstrap-slider.min.js" class="attribute-value">static/js/bootstrap-slider.min.js</a>"&gt;</span><span></span><span>&lt;/<span class="end-tag">script</span>&gt;</span><span>
<span id="line87"></span>
<span id="line88"></span>    </span><span class="comment">&lt;!-- spinner --&gt;</span><span>
<span id="line89"></span>    </span><span>&lt;<span class="start-tag">script</span> <span class="attribute-name">type</span>="<a class="attribute-value">text/javascript</a>" <span class="attribute-name">src</span>="<a href="view-source:http://scenicstroll.xyz/static/js/spin.min.js" class="attribute-value">static/js/spin.min.js</a>"&gt;</span><span></span><span>&lt;/<span class="end-tag">script</span>&gt;</span><span>
<span id="line90"></span>    </span><span>&lt;<span class="start-tag">script</span> <span class="attribute-name">type</span>="<a class="attribute-value">text/javascript</a>" <span class="attribute-name">src</span>="<a href="view-source:http://scenicstroll.xyz/static/js/leaflet.spin.js" class="attribute-value">static/js/leaflet.spin.js</a>"&gt;</span><span></span><span>&lt;/<span class="end-tag">script</span>&gt;</span><span>
<span id="line91"></span>
<span id="line92"></span>    </span><span class="comment">&lt;!-- Google Maps API (for geocomplete)--&gt;</span><span>
<span id="line93"></span>    </span><span>&lt;<span class="start-tag">script</span> <span class="attribute-name">src</span>="<a href="view-source:http://maps.googleapis.com/maps/api/js?sensor=false&amp;libraries=places" class="attribute-value">http://maps.googleapis.com/maps/api/js?sensor=false<span><span title="“&amp;” did not start a character reference. (“&amp;” probably should have been escaped as “&amp;amp;”.)" class="error">&amp;</span>l</span>ibraries=places</a>"&gt;</span><span></span><span>&lt;/<span class="end-tag">script</span>&gt;</span><span>
<span id="line94"></span>    </span><span>&lt;<span class="start-tag">script</span> <span class="attribute-name">src</span>="<a href="view-source:http://scenicstroll.xyz/static/js/jquery.geocomplete.min.js" class="attribute-value">static/js/jquery.geocomplete.min.js</a>"&gt;</span><span></span><span>&lt;/<span class="end-tag">script</span>&gt;</span><span>
<span id="line95"></span>
<span id="line96"></span>    </span><span>&lt;<span class="start-tag">script</span> <span class="attribute-name">type</span>="<a class="attribute-value">text/javascript</a>"&gt;</span><span>
<span id="line97"></span>
<span id="line98"></span>      function createMap(lat, lon, zoom){
<span id="line99"></span>        var map = L.map('map', {zoomControl: false}).setView([lat, lon], zoom);
<span id="line100"></span>        map.addControl(L.control.zoom({position: 'bottomleft'}))
<span id="line101"></span>        L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
<span id="line102"></span>            attribution: 'Map data &amp;copy; </span><span>&lt;a</span><span> href="http://openstreetmap.org"&gt;OpenStreetMap</span><span>&lt;/<span></span>a</span><span>&gt; contributors, </span><span>&lt;a</span><span> href="http://creativecommons.org/licenses/by-sa/2.0/"&gt;CC-BY-SA</span><span>&lt;/<span></span>a</span><span>&gt;, Imagery © </span><span>&lt;a</span><span> href="http://mapbox.com"&gt;Mapbox</span><span>&lt;/<span></span>a</span><span>&gt;',
<span id="line103"></span>            maxZoom: 18,
<span id="line104"></span>            id: 'mcwitt.no6d18i9',
<span id="line105"></span>            accessToken: 'pk.eyJ1IjoibWN3aXR0IiwiYSI6ImNpZndwNmpnNDM3ZXN0dG0xMm9ieDAxeGQifQ.JVpz09GcugmF8puxgP3LQQ',
<span id="line106"></span>            detectRetina: true
<span id="line107"></span>        }).addTo(map);
<span id="line108"></span>        return map;
<span id="line109"></span>      }
<span id="line110"></span>
<span id="line111"></span>      function addRoute(map, latlngs){
<span id="line112"></span>        route = L.polyline(latlngs, {color: 'blue'})
<span id="line113"></span>        map.fitBounds(route.getBounds());
<span id="line114"></span>        return L.layerGroup()
<span id="line115"></span>                .addLayer(L.marker(latlngs[0]))
<span id="line116"></span>                .addLayer(L.marker(latlngs[latlngs.length-1]))
<span id="line117"></span>                .addLayer(route)
<span id="line118"></span>                .addTo(map);
<span id="line119"></span>      }
<span id="line120"></span>
<span id="line121"></span>      function addClusters(map, clusters){
<span id="line122"></span>        var markers = L.markerClusterGroup();
<span id="line123"></span>        $.each(clusters, function(i, c){
<span id="line124"></span>            marker = L.marker([c.location[0], c.location[1]])
<span id="line125"></span>            marker.bindPopup("</span><span>&lt;i</span><span>mg src=" + c.repr_url + " width=200px&gt;");
<span id="line126"></span>            markers.addLayer(marker);
<span id="line127"></span>        });
<span id="line128"></span>        map.addLayer(markers);
<span id="line129"></span>        return markers;
<span id="line130"></span>      }
<span id="line131"></span>
<span id="line132"></span>      $(document).ready(function(){
<span id="line133"></span>        $('#address1').geocomplete();
<span id="line134"></span>        $('#address2').geocomplete();
<span id="line135"></span>        $('#alpha').slider({'max': 11, 'value': 5 });
<span id="line136"></span>
<span id="line137"></span>        var map = createMap(37.7577,-122.4376, 12);
<span id="line138"></span>        var route = L.polyline([]).addTo(map);
<span id="line139"></span>        var markers = L.markerClusterGroup([]).addTo(map);
<span id="line140"></span>
<span id="line141"></span>        $('form').on('submit', function(e){
<span id="line142"></span>            e.preventDefault();
<span id="line143"></span>            map.spin(true);
<span id="line144"></span>            $.ajax({
<span id="line145"></span>              type: "POST",
<span id="line146"></span>              cache: false,
<span id="line147"></span>              url: $(this).attr('action'),
<span id="line148"></span>              data: $(this).serialize(),
<span id="line149"></span>              success: function(data) {
<span id="line150"></span>                map.spin(false);
<span id="line151"></span>                $('#status').html(data.message);
<span id="line152"></span>                if (data.success) {
<span id="line153"></span>                  map.removeLayer(route);
<span id="line154"></span>                  map.removeLayer(markers);
<span id="line155"></span>                  route = addRoute(map, data.latlngs);
<span id="line156"></span>                  markers = addClusters(map, data.clusters);
<span id="line157"></span>                }
<span id="line158"></span>              }
<span id="line159"></span>            });
<span id="line160"></span>        });
<span id="line161"></span>      });
<span id="line162"></span>    </span><span>&lt;/<span class="end-tag">script</span>&gt;</span><span>
<span id="line163"></span>  </span><span>&lt;/<span class="end-tag">body</span>&gt;</span><span>
<span id="line164"></span></span><span>&lt;/<span class="end-tag">html</span>&gt;</span><span>
<span id="line165"></span></span></pre><menu id="actions" type="context"><menuitem accesskey="L" label="Go to Line…" id="goToLine"></menuitem><menuitem type="checkbox" label="Wrap Long Lines" id="wrapLongLines"></menuitem><menuitem checked="true" type="checkbox" label="Syntax Highlighting" id="highlightSyntax"></menuitem></menu></body></html>